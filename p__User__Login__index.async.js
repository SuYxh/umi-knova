"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[366],{43366:function(ue,B,a){a.r(B),a.d(B,{default:function(){return q}});var U=a(90228),l=a.n(U),O=a(26068),f=a.n(O),N=a(87999),m=a.n(N),z=a(48305),y=a.n(z),E=a(13167),W=a(97381),$=a(10033),R=a(6536),C=a(36117),b=a(61571),G=a(63499),j=a(36526),V=a(53863),H=a(93161),S=a(77497),F=a(60699),J=a(11789),A=a(49927),K=a(80485),Z=a(93236),Q=a(19103),X=a(31250),e=a(62086);function o(v){return(0,e.jsx)("span",{children:v.defaultMessage})}var M=a(22380),Y=a(21262),w=function(){var d=(0,S.l)(function(g){var h=g.token;return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:h.colorPrimaryActive}}});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{className:d},"AlipayCircleOutlined"),(0,e.jsx)(W.Z,{className:d},"TaobaoCircleOutlined"),(0,e.jsx)($.Z,{className:d},"WeiboCircleOutlined")]})},L=function(d){var g=d.content;return(0,e.jsx)(J.Z,{style:{marginBottom:24},message:g,type:"error",showIcon:!0})},k=function(){var d=(0,Z.useState)({}),g=y()(d,2),h=g[0],_=g[1],ee=(0,Z.useState)("account"),P=y()(ee,2),p=P[0],ae=P[1],T=(0,F.useModel)("@@initialState"),x=T.initialState,se=T.setInitialState,re=(0,S.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),ne=function(){var c=m()(l()().mark(function t(){var u,r;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x==null||(u=x.fetchUserInfo)===null||u===void 0?void 0:u.call(x);case 2:r=n.sent,console.log("userInfo",r),r&&(0,Q.flushSync)(function(){se(function(s){return f()(f()({},s),{},{currentUser:r})})});case 5:case"end":return n.stop()}},t)}));return function(){return c.apply(this,arguments)}}(),te=function(){var c=m()(l()().mark(function t(u){var r,i;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,(0,M.x4)(f()(f()({},u),{},{type:p}));case 3:if(r=s.sent,console.log("msg",r),r.status!=="ok"){s.next=12;break}return A.ZP.success("\u767B\u5F55\u6210\u529F\uFF01"),s.next=9,ne();case 9:return i=new URL(window.location.href).searchParams,F.history.push(i.get("redirect")||"/"),s.abrupt("return");case 12:console.log(r),_(r),s.next=20;break;case 16:s.prev=16,s.t0=s.catch(0),console.log(s.t0),A.ZP.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 20:case"end":return s.stop()}},t,null,[[0,16]])}));return function(u){return c.apply(this,arguments)}}(),I=h.status,D=h.type;return(0,e.jsxs)("div",{className:re,children:[(0,e.jsx)(F.Helmet,{children:(0,e.jsxs)("title",{children:["\u767B\u5F55\u9875 - ",Y.Z.title]})}),(0,e.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,e.jsxs)(G.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:"Ant Design \u662F\u897F\u6E56\u533A\u6700\u5177\u5F71\u54CD\u529B\u7684 Web \u8BBE\u8BA1\u89C4\u8303",initialValues:{autoLogin:!0},actions:[(0,e.jsx)(o,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(w,{},"icons")],onFinish:function(){var c=m()(l()().mark(function t(u){return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,te(u);case 2:case"end":return i.stop()}},t)}));return function(t){return c.apply(this,arguments)}}(),children:[(0,e.jsx)(K.Z,{activeKey:p,onChange:ae,centered:!0,items:[{key:"account",label:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"},{key:"mobile",label:"\u624B\u673A\u53F7\u767B\u5F55"}]}),I==="error"&&D==="account"&&(0,e.jsx)(L,{content:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"}),p==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(R.Z,{})},placeholder:"\u7528\u6237\u540D: admin or user",rules:[{required:!0,message:(0,e.jsx)(o,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(j.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(C.Z,{})},placeholder:"\u5BC6\u7801: ant.design",rules:[{required:!0,message:(0,e.jsx)(o,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),I==="error"&&D==="mobile"&&(0,e.jsx)(L,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),p==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(b.Z,{})},name:"mobile",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:(0,e.jsx)(o,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(o,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)(V.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(C.Z,{})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(t,u){return t?"".concat(u," \u83B7\u53D6\u9A8C\u8BC1\u7801}"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(o,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var c=m()(l()().mark(function t(u){var r;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.mJ)({phone:u});case 2:if(r=n.sent,r){n.next=5;break}return n.abrupt("return");case 5:A.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return n.stop()}},t)}));return function(t){return c.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(H.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(o,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},children:(0,e.jsx)(o,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,e.jsx)(X.$_,{})]})},q=k}}]);
