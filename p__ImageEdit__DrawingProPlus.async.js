(self.webpackChunk=self.webpackChunk||[]).push([[883],{18172:function(L,g,n){"use strict";n.r(g);var d=n(19632),M=n.n(d),m=n(5574),t=n.n(m),o=n(62435),r=n(79566),c=n(84420),D=n.n(c),s=n(86074),h=function(){var E=(0,o.useState)([]),a=t()(E,2),u=a[0],v=a[1],p=(0,o.useState)(!1),C=t()(p,2),b=C[0],R=C[1],w=(0,o.useState)(!1),S=t()(w,2),f=S[0],y=S[1],I=(0,o.useState)({x:0,y:0}),j=t()(I,2),O=j[0],T=j[1],U=D()("https://qn.huat.xyz/mac/202406051057150.jpeg","Anonymous"),W=t()(U,1),x=W[0],B=function(e){R(!0);var l=e.target.getStage(),i=l.getPointerPosition();z(i)},K=function(e){var l=e.target.getStage(),i=l.getPointerPosition();T(i),b&&F(i),f&&!b&&G(i)},H=function(){R(!1)},z=function(e){v([].concat(M()(u),[{points:[e.x,e.y],tool:f?"eraser":"brush"}]))},F=function(e){var l=u[u.length-1];l.points=[].concat(M()(l.points),[e.x,e.y]);var i=u.slice();i.splice(u.length-1,1,l),v(i)},G=function(e){var l=10,i=u.filter(function(k){return k.points.every(function(N,A){return A%2===0?Math.hypot(N-e.x,k.points[A+1]-e.y)>l:!0})});v(i)},J=function(){y(!f)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:J,children:f?"Switch to Brush":"Switch to Eraser"}),(0,s.jsx)(r.Hf,{width:window.innerWidth,height:window.innerHeight,onMouseDown:B,onMousemove:K,onMouseup:H,children:(0,s.jsxs)(r.mh,{children:[x&&(0,s.jsx)(r.Ee,{image:x}),u.map(function(_,e){return(0,s.jsx)(r.x1,{points:_.points,stroke:_.tool==="eraser"?"white":"black",strokeWidth:5,tension:.5,lineCap:"round",globalCompositeOperation:_.tool==="eraser"?"destination-out":"source-over"},e)}),f&&(0,s.jsx)(r.Cd,{x:O.x,y:O.y,radius:10,fill:"red"})]})})]})};g.default=h},84420:function(L,g,n){var d=n(62435);L.exports=function(m,t,o){const r=d.useRef("loading"),c=d.useRef(),[D,s]=d.useState(0),h=d.useRef(),P=d.useRef(),E=d.useRef();return(h.current!==m||P.current!==t||E.current!==o)&&(r.current="loading",c.current=void 0,h.current=m,P.current=t,E.current=o),d.useLayoutEffect(function(){if(!m)return;var a=document.createElement("img");function u(){r.current="loaded",c.current=a,s(Math.random())}function v(){r.current="failed",c.current=void 0,s(Math.random())}return a.addEventListener("load",u),a.addEventListener("error",v),t&&(a.crossOrigin=t),o&&(a.referrerPolicy=o),a.src=m,function(){a.removeEventListener("load",u),a.removeEventListener("error",v)}},[m,t,o]),[c.current,r.current]}}}]);
