(self.webpackChunk=self.webpackChunk||[]).push([[883],{44307:function(p,g,n){"use strict";n.r(g);var d=n(15558),M=n.n(d),m=n(48305),t=n.n(m),o=n(93236),r=n(53531),c=n(97629),L=n.n(c),s=n(62086),h=function(){var E=(0,o.useState)([]),a=t()(E,2),_=a[0],v=a[1],D=(0,o.useState)(!1),C=t()(D,2),b=C[0],R=C[1],w=(0,o.useState)(!1),S=t()(w,2),f=S[0],y=S[1],I=(0,o.useState)({x:0,y:0}),O=t()(I,2),x=O[0],T=O[1],U=L()("https://qn.huat.xyz/mac/202406051057150.jpeg","Anonymous"),W=t()(U,1),k=W[0],B=function(e){R(!0);var l=e.target.getStage(),i=l.getPointerPosition();z(i)},K=function(e){var l=e.target.getStage(),i=l.getPointerPosition();T(i),b&&F(i),f&&!b&&G(i)},H=function(){R(!1)},z=function(e){v([].concat(M()(_),[{points:[e.x,e.y],tool:f?"eraser":"brush"}]))},F=function(e){var l=_[_.length-1];l.points=[].concat(M()(l.points),[e.x,e.y]);var i=_.slice();i.splice(_.length-1,1,l),v(i)},G=function(e){var l=10,i=_.filter(function(A){return A.points.every(function(N,j){return j%2===0?Math.hypot(N-e.x,A.points[j+1]-e.y)>l:!0})});v(i)},J=function(){y(!f)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:J,children:f?"Switch to Brush":"Switch to Eraser"}),(0,s.jsx)(r.Hf,{width:window.innerWidth,height:window.innerHeight,onMouseDown:B,onMousemove:K,onMouseup:H,children:(0,s.jsxs)(r.mh,{children:[k&&(0,s.jsx)(r.Ee,{image:k}),_.map(function(u,e){return(0,s.jsx)(r.x1,{points:u.points,stroke:u.tool==="eraser"?"white":"black",strokeWidth:5,tension:.5,lineCap:"round",globalCompositeOperation:u.tool==="eraser"?"destination-out":"source-over"},e)}),f&&(0,s.jsx)(r.Cd,{x:x.x,y:x.y,radius:10,fill:"red"})]})})]})};g.default=h},97629:function(p,g,n){var d=n(93236);p.exports=function(m,t,o){const r=d.useRef("loading"),c=d.useRef(),[L,s]=d.useState(0),h=d.useRef(),P=d.useRef(),E=d.useRef();return(h.current!==m||P.current!==t||E.current!==o)&&(r.current="loading",c.current=void 0,h.current=m,P.current=t,E.current=o),d.useLayoutEffect(function(){if(!m)return;var a=document.createElement("img");function _(){r.current="loaded",c.current=a,s(Math.random())}function v(){r.current="failed",c.current=void 0,s(Math.random())}return a.addEventListener("load",_),a.addEventListener("error",v),t&&(a.crossOrigin=t),o&&(a.referrerPolicy=o),a.src=m,function(){a.removeEventListener("load",_),a.removeEventListener("error",v)}},[m,t,o]),[c.current,r.current]}}}]);
