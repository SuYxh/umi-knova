"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[962],{58245:function(C,g,n){n.r(g);var D=n(48305),E=n.n(D),M=n(26068),r=n.n(M),o=n(93236),m=n(53531),_=n(62086),R=function(s){var l=s.shapeProps,u=s.isSelected,f=s.onSelect,v=s.onChange,c=o.useRef(),i=o.useRef();return o.useEffect(function(){u&&(i.current.nodes([c.current]),i.current.getLayer().batchDraw())},[u]),(0,_.jsxs)(o.Fragment,{children:[(0,_.jsx)(m.UL,r()(r()({onClick:f,onTap:f,ref:c},l),{},{draggable:!0,onDragEnd:function(t){v(r()(r()({},l),{},{x:t.target.x(),y:t.target.y()}))},onTransformEnd:function(t){var e=c.current,a=e.scaleX(),h=e.scaleY();e.scaleX(1),e.scaleY(1),v(r()(r()({},l),{},{x:e.x(),y:e.y(),width:Math.max(5,e.width()*a),height:Math.max(e.height()*h)}))}})),u&&(0,_.jsx)(m.$T,{ref:i,flipEnabled:!1,boundBoxFunc:function(t,e){return Math.abs(e.width)<5||Math.abs(e.height)<5?t:e}})]})},x=[{x:10,y:10,width:100,height:100,fill:"red",id:"rect1"},{x:150,y:150,width:100,height:100,fill:"green",id:"rect2"}],S=function(){var s=o.useState(x),l=E()(s,2),u=l[0],f=l[1],v=o.useState(null),c=E()(v,2),i=c[0],d=c[1],t=function(a){var h=a.target===a.target.getStage();h&&d(null)};return(0,_.jsx)("div",{style:{width:"600px",height:"500px",border:"1px solid black"},children:(0,_.jsx)(m.Hf,{width:600,height:500,onMouseDown:t,onTouchStart:t,children:(0,_.jsx)(m.mh,{children:u.map(function(e,a){return(0,_.jsx)(R,{shapeProps:e,isSelected:e.id===i,onSelect:function(){d(e.id)},onChange:function(p){console.log("newAttrs",p);var b=u.slice();b[a]=p,f(b)}},a)})})})})};g.default=S}}]);
