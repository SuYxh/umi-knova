(self.webpackChunk=self.webpackChunk||[]).push([[271],{43722:function(I,R,e){"use strict";e.r(R);var a=e(26068),D=e.n(a),i=e(48305),o=e.n(i),d=e(67825),m=e.n(d),r=e(93236),c=e(53531),v=e(97629),g=e.n(v),n=e(62086),f=["src","stageWidth","stageHeight","rotation"],_="https://qn.huat.xyz/mac/202406051057150.jpeg",E=function(u){var C=u.src,l=u.stageWidth,h=u.stageHeight,p=u.rotation,M=m()(u,f),L=g()(C,"anonymous"),O=o()(L,1),t=O[0],j=(0,r.useState)({width:0,height:0,x:0,y:0}),s=o()(j,2),x=s[0],W=s[1];return(0,r.useEffect)(function(){if(t){var B=Math.min(l,h),A=Math.max(t.width,t.height),k=B/A*.8,T=t.width*k,U=t.height*k;W({width:T,height:U,x:l/2,y:h/2})}},[t,l,h]),(0,n.jsx)(c.Ee,D()(D()({image:t,rotation:p,offsetX:x.width/2,offsetY:x.height/2},x),M))};function P(){var b=600,u=500,C=(0,r.useState)(0),l=o()(C,2),h=l[0],p=l[1],M=(0,r.useRef)(null),L=function(){var t=M.current,j=t.toDataURL(),s=document.createElement("a");s.download="rotated-image.png",s.href=j,document.body.appendChild(s),s.click(),document.body.removeChild(s)};return(0,n.jsxs)("div",{style:{width:"600px",height:"auto",border:"1px solid black"},children:[(0,n.jsx)("input",{type:"range",min:"0",max:"360",value:h,onChange:function(t){return p(t.target.value)},style:{marginBottom:"10px"}}),(0,n.jsx)("button",{type:"button",onClick:L,style:{marginBottom:"10px"},children:"\u5BFC\u51FA\u753B\u5E03"}),(0,n.jsx)(c.Hf,{ref:M,width:b,height:u,children:(0,n.jsx)(c.mh,{children:(0,n.jsx)(E,{src:_,stageWidth:b,stageHeight:u,rotation:Number(h)})})})]})}R.default=P},97629:function(I,R,e){var a=e(93236);I.exports=function(i,o,d){const m=a.useRef("loading"),r=a.useRef(),[c,v]=a.useState(0),g=a.useRef(),n=a.useRef(),f=a.useRef();return(g.current!==i||n.current!==o||f.current!==d)&&(m.current="loading",r.current=void 0,g.current=i,n.current=o,f.current=d),a.useLayoutEffect(function(){if(!i)return;var _=document.createElement("img");function E(){m.current="loaded",r.current=_,v(Math.random())}function P(){m.current="failed",r.current=void 0,v(Math.random())}return _.addEventListener("load",E),_.addEventListener("error",P),o&&(_.crossOrigin=o),d&&(_.referrerPolicy=d),_.src=i,function(){_.removeEventListener("load",E),_.removeEventListener("error",P)}},[i,o,d]),[r.current,m.current]}}}]);
